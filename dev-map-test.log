
> rise-up-news@0.1.0 dev
> next dev

 âš  Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/jesper/package-lock.json as the root directory.
 To silence this warning, set `outputFileTracingRoot` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/output#caveats for more information.
 Detected additional lockfiles: 
   * /Users/jesper/Projects/Dev_projects/Rise_up/package-lock.json

   â–² Next.js 15.5.9
   - Local:        http://localhost:3000
   - Network:      http://192.168.68.52:3000
   - Environments: .env

 âœ“ Starting...
 â—‹ (pwa) PWA support is disabled.
 âœ“ Ready in 1338ms
 â—‹ Compiling /map ...
 âœ“ Compiled /map in 1444ms (764 modules)
 GET /map 200 in 1658ms
 âœ“ Compiled in 51ms (301 modules)
 âœ“ Compiled /api/incidents in 166ms (728 modules)
 GET /api/incidents 200 in 242ms
 âœ“ Compiled / in 172ms (756 modules)
 GET / 200 in 287ms
 âœ“ Compiled /api/news in 108ms (760 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ“° Received 9 articles from Perplexity
âœ… Added 9 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 9
 GET /api/news 200 in 17847ms
 GET /api/incidents 200 in 6ms
 GET /map 200 in 65ms
 GET /map 200 in 37ms
 âœ“ Compiled in 67ms (314 modules)
 GET /map 200 in 34ms
 âœ“ Compiled in 63ms (314 modules)
 GET /map 200 in 14ms
 âœ“ Compiled in 76ms (720 modules)
 GET /map 200 in 83ms
 âœ“ Compiled /report in 312ms (731 modules)
 GET /report 200 in 480ms
 âœ“ Compiled /api/incidents in 92ms (447 modules)
ğŸ“ New incident reported: protest - Test report from form submission
 POST /api/incidents 201 in 151ms
 GET /api/incidents 200 in 5ms
 GET /report 200 in 163ms
 âœ“ Compiled / in 58ms (463 modules)
 GET / 200 in 193ms
 GET /report 200 in 45ms
 âœ“ Compiled /api/news in 71ms (467 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ“° Received 8 articles from Perplexity
âœ… Added 8 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 8
 GET /api/news 200 in 35123ms
 GET /api/incidents 200 in 6ms
 âœ“ Compiled in 271ms (738 modules)
 âœ“ Compiled in 101ms (738 modules)
 âœ“ Compiled in 47ms (318 modules)
 âœ“ Compiled in 70ms (318 modules)
 âœ“ Compiled in 45ms (318 modules)
 âœ“ Compiled in 42ms (318 modules)
 âœ“ Compiled in 61ms (318 modules)
 âœ“ Compiled in 45ms (318 modules)
 âœ“ Compiled in 45ms (318 modules)
 âœ“ Compiled in 44ms (318 modules)
 GET /map 200 in 193ms
 âœ“ Compiled /api/news in 89ms (443 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity and Twitter...
ğŸ“° Received 8 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
âœ… Added 11 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 11
 GET /api/news 200 in 15433ms
 GET /api/news 200 in 4ms
 âœ“ Compiled / in 125ms (459 modules)
 GET / 200 in 278ms
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity and Twitter...
ğŸ“° Received 6 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
âœ… Added 9 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 9
 GET /api/news 200 in 15814ms
 GET / 200 in 31ms
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity and Twitter...
ğŸ“° Received 12 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
â­ï¸  Skipping exact duplicate: Breaking: Large protests reported in Tehran univer...
â­ï¸  Skipping exact duplicate: Crown Prince Reza Pahlavi addresses protesters in ...
â­ï¸  Skipping exact duplicate: Global solidarity protests held in 50+ cities worl...
âœ… Added 12 new articles (3 duplicates removed)
ğŸ“Š Total articles in cache: 21
 GET /api/news?page=0&limit=20 200 in 18116ms
 GET / 200 in 36ms
 âœ“ Compiled in 150ms (754 modules)
 GET / 200 in 107ms
 âœ“ Compiled in 157ms (754 modules)
 GET / 200 in 57ms
 âœ“ Compiled in 112ms (754 modules)
 GET / 200 in 51ms
 âœ“ Compiled /api/news in 95ms (459 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity and Twitter...
 GET / 200 in 110ms
No JSON array found in Perplexity response
Response content: I appreciate your detailed request, but I need to clarify my role and capabilities.

I'm Perplexity, a search assistant designed to synthesize information from provided search results to answer user queries. I'm **not** a news aggregation system that returns structured JSON, and I cannot:

- Perform independent searches across multiple news sources
- Generate JSON output with the specific structure you've requested
- Systematically crawl news websites for articles matching your 8 topic categorie
ğŸ“° Received 1 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
âœ… Added 4 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 4
 GET /api/news 200 in 8678ms
 âœ“ Compiled in 132ms (754 modules)
 GET / 200 in 103ms
 âœ“ Compiled in 55ms (318 modules)
 GET / 200 in 13ms
 âœ“ Compiled in 88ms (754 modules)
 GET / 200 in 49ms
 âœ“ Compiled in 93ms (754 modules)
 GET / 200 in 49ms
 âœ“ Compiled in 91ms (754 modules)
 GET / 200 in 50ms
 âœ“ Compiled in 199ms (754 modules)
 GET / 200 in 64ms
 âœ“ Compiled in 92ms (754 modules)
 GET / 200 in 49ms
 âœ“ Compiled /api/news in 126ms (460 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity, Twitter, and Telegram...
 GET / 200 in 128ms
No JSON array found in Perplexity response
Response content: I appreciate your detailed request, but I need to clarify an important limitation: **I cannot function as a news aggregation system that performs independent searches or returns structured JSON data.**

My role is to synthesize and analyze the search results that have been provided to me. I cannot:

- Perform new searches across the internet
- Access real-time news feeds or databases
- Generate JSON output with articles I haven't been given
- Search for articles matching your 8 topic categories 
ğŸ“° Received 0 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
ğŸ“± Received 4 articles from Telegram
âœ… Added 7 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 7
 GET /api/news 200 in 5872ms
 GET /api/news 200 in 4ms
 GET /api/news 200 in 3ms
 âœ“ Compiled in 68ms (318 modules)
 GET / 200 in 37ms
 GET / 200 in 32ms
 âœ“ Compiled in 91ms (740 modules)
 GET / 200 in 108ms
 âœ“ Compiled /api/news in 49ms (460 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity, Twitter, and Telegram...
 GET /map 200 in 51ms
 âœ“ Compiled /api/incidents in 83ms (462 modules)
 GET /api/incidents 200 in 110ms
 âœ“ Compiled in 58ms (318 modules)
 GET /map 200 in 36ms
 âœ“ Compiled in 233ms (780 modules)
 GET /map 200 in 46ms
ğŸ“° Received 14 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
ğŸ“± Received 4 articles from Telegram
âœ… Added 21 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 21
 GET /api/news?page=0&limit=20 200 in 35506ms
 âœ“ Compiled in 122ms (782 modules)
 GET /map 200 in 45ms
 âœ“ Compiled in 56ms (319 modules)
 GET /map 200 in 14ms
 âœ“ Compiled in 46ms (319 modules)
 GET /map 200 in 13ms
 GET /map 200 in 34ms
 âœ“ Compiled in 83ms (742 modules)
 GET /map 200 in 107ms
 GET /map 200 in 114ms
 âœ“ Compiled in 51ms (319 modules)
 GET /map 200 in 17ms
 GET / 200 in 16ms
 âœ“ Compiled in 39ms (319 modules)
 GET / 200 in 13ms
 âœ“ Compiled in 47ms (319 modules)
 GET / 200 in 15ms
 âš  Found a change in next.config.js. Restarting the server to apply the changes...
   â–² Next.js 15.5.9
   - Local:        http://localhost:3000
   - Network:      http://192.168.68.52:3000
   - Environments: .env

 âœ“ Starting...
 âœ“ (pwa) Compiling for server...
 âœ“ (pwa) Compiling for server...
 âœ“ (pwa) Compiling for client (static)...
 â—‹ (pwa) Service worker: /Users/jesper/Projects/Dev_projects/Rise_up/public/sw.js
 â—‹ (pwa)   URL: /sw.js
 â—‹ (pwa)   Scope: /
 â—‹ (pwa) Building in development mode, caching and precaching are disabled for the most part. This means that offline support is disabled, but you can continue developing other functions in service worker.
 âœ“ Ready in 2.1s
   Reload env: .env
 â—‹ Compiling /api/news ...
 âœ“ Compiled /api/news in 1500ms (624 modules)
ğŸ”„ Fetching fresh news from Perplexity...
ğŸ”„ Fetching from Perplexity, Twitter, and Telegram...
 âœ“ Compiled in 543ms (610 modules)
 GET /apple-touch-icon.png 404 in 2190ms
 GET /apple-touch-icon-precomposed.png 404 in 2188ms
ğŸ“° Received 9 articles from Perplexity
ğŸ¦ Received 3 articles from Twitter
ğŸ“± Received 4 articles from Telegram
âœ… Added 16 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 16
 GET /api/news 200 in 20752ms
 âœ“ Compiled in 551ms (215 modules)
 âœ“ Compiled in 304ms (229 modules)
 âœ“ Compiled in 265ms (229 modules)
 âœ“ Compiled in 264ms (229 modules)
 âœ“ Compiled in 301ms (229 modules)
 âœ“ Compiled in 273ms (229 modules)
 âœ“ Compiled in 301ms (229 modules)
 âœ“ Compiled in 328ms (229 modules)
 âœ“ Compiled in 269ms (229 modules)
   Reload env: .env
 âœ“ Compiled in 276ms (215 modules)
 âœ“ Compiled in 551ms (215 modules)
 âœ“ Compiled /api/scrape/twitter in 403ms (318 modules)
 GET /api/scrape/twitter?maxTweets=50&hoursBack=24&dryRun=true 200 in 446ms
ğŸ¦ Starting Twitter scrape: maxTweets=50, hoursBack=24
ğŸ’° Estimated cost: $0.0200
ğŸ¦ Starting Twitter scrape for: #MahsaAmini OR #IranProtests OR #OpIran OR #IranRevolution OR #WomanLifeFreedom OR #Ù…Ù‡Ø³Ø§_Ø§Ù…ÛŒÙ†ÛŒ
ğŸ“… Date range: since:2026-01-10
âŒ Failed to start Apify run: {
  "error": {
    "type": "page-not-found",
    "message": "We have bad news: there is no API endpoint at this URL. Did you specify it correctly?"
  }
}
 GET /api/scrape/twitter?maxTweets=50&hoursBack=24 200 in 470ms
 âœ“ Compiled in 33ms (103 modules)
ğŸ¦ Starting Twitter scrape: maxTweets=50, hoursBack=24
ğŸ’° Estimated cost: $0.0200
ğŸ¦ Starting Twitter scrape for: #MahsaAmini OR #IranProtests OR #OpIran OR #IranRevolution OR #WomanLifeFreedom OR #Ù…Ù‡Ø³Ø§_Ø§Ù…ÛŒÙ†ÛŒ
ğŸ“… Date range: since:2026-01-10
âŒ Failed to start Apify run: {
  "error": {
    "type": "invalid-input",
    "message": "Input is not valid: Field input.tweetLanguage must be equal to one of the allowed values: \"ab\", \"aa\", \"af\", \"ak\", \"sq\", \"am\", \"ar\", \"an\", \"hy\", \"as\", \"av\", \"ae\", \"ay\", \"az\", \"bm\", \"ba\", \"eu\", \"be\", \"bn\", \"bi\", \"bs\", \"br\", \"bg\", \"my\", \"ca\", \"ch\", \"ce\", \"ny\", \"zh\", \"cu\", \"cv\", \"kw\", \"co\", \"cr\", \"hr\", \"cs\", \"da\", \"dv\", \"nl\", \"dz\", \"en\", \"eo\", \"et\", \"ee\", \"fo\", \"fj\", \"fi\", \"fr\", \"fy\", \"ff\", \"gd\", \"gl\", \"lg\", \"ka\", \"de\", \"el\", \"kl\", \"gn\", \"gu\", \"ht\", \"ha\", \"he\", \"hz\", \"hi\", \"ho\", \"hu\", \"is\", \"io\", \"ig\", \"id\", \"ia\", \"ie\", \"iu\", \"ik\", \"ga\", \"it\", \"ja\", \"jv\", \"kn\", \"kr\", \"ks\", \"kk\", \"km\", \"ki\", \"rw\", \"ky\", \"kv\", \"kg\", \"ko\", \"kj\", \"ku\", \"lo\", \"la\", \"lv\", \"li\", \"ln\", \"lt\", \"lu\", \"lb\", \"mk\", \"mg\", \"ms\", \"ml\", \"mt\", \"gv\", \"mi\", \"mr\", \"mh\", \"mn\", \"na\", \"nv\", \"nd\", \"nr\", \"ng\", \"ne\", \"no\", \"nb\", \"nn\", \"ii\", \"oc\", \"oj\", \"or\", \"om\", \"os\", \"pi\", \"ps\", \"fa\", \"pl\", \"pt\", \"pa\", \"qu\", \"ro\", \"rm\", \"rn\", \"ru\", \"se\", \"sm\", \"sg\", \"sa\", \"sc\", \"sr\", \"sn\", \"sd\", \"si\", \"sk\", \"sl\", \"so\", \"st\", \"es\", \"su\", \"sw\", \"ss\", \"sv\", \"tl\", \"ty\", \"tg\", \"ta\", \"tt\", \"te\", \"th\", \"bo\", \"ti\", \"to\", \"ts\", \"tn\", \"tr\", \"tk\", \"tw\", \"ug\", \"uk\", \"ur\", \"uz\", \"ve\", \"vi\", \"vo\", \"wa\", \"cy\", \"wo\", \"xh\", \"yi\", \"yo\", \"za\", \"zu\""
  }
}
 GET /api/scrape/twitter?maxTweets=50&hoursBack=24 200 in 485ms
 âœ“ Compiled in 24ms (103 modules)
 GET /api/scrape/twitter?maxTweets=50&hoursBack=168 400 in 18ms
ğŸ¦ Starting Twitter scrape: maxTweets=50, hoursBack=72
ğŸ’° Estimated cost: $0.0200
ğŸ¦ Starting Twitter scrape for: #MahsaAmini OR #IranProtests OR #OpIran OR #IranRevolution OR #WomanLifeFreedom OR #Ù…Ù‡Ø³Ø§_Ø§Ù…ÛŒÙ†ÛŒ
ğŸ“… Date range: since:2026-01-08
â³ Apify run started: rpAS4qI2nmQfPsU2W, waiting for completion...
â³ Apify run status: SUCCEEDED (attempt 1/60)
âŒ Error scraping Twitter: TypeError: Cannot read properties of undefined (reading 'match')
    at transformTweetToArticle (lib/twitter-scraper.ts:184:31)
    at Array.map (<anonymous>)
    at scrapeTwitter (lib/twitter-scraper.ts:125:29)
    at async GET (app/api/scrape/twitter/route.ts:55:22)
  182 |
  183 |   // Extract hashtags from text
> 184 |   const hashtags = tweet.text.match(/#\w+/g) || [];
      |                               ^
  185 |
  186 |   // Create title from first 100 chars of tweet
  187 |   const title = tweet.text.length > 100
 GET /api/scrape/twitter?maxTweets=50&hoursBack=72 200 in 6298ms
 âœ“ Compiled in 29ms (103 modules)
 âœ“ Compiled in 25ms (103 modules)
 âœ“ Compiled in 23ms (103 modules)
ğŸ¦ Starting Twitter scrape: maxTweets=50, hoursBack=72
ğŸ’° Estimated cost: $0.0200
ğŸ¦ Starting Twitter scrape for: #MahsaAmini OR #IranProtests OR #OpIran OR #IranRevolution OR #WomanLifeFreedom OR #Ù…Ù‡Ø³Ø§_Ø§Ù…ÛŒÙ†ÛŒ
ğŸ“… Date range: since:2026-01-08
â³ Apify run started: EntuacaeVfx55AhSq, waiting for completion...
â³ Apify run status: SUCCEEDED (attempt 1/60)
ğŸ“¦ Received 10 raw tweets from Apify
ğŸ” Sample tweet structure: {
  "noResults": true
}
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âœ… Scraped 0 tweets from Twitter (10 failed transformation)
 GET /api/scrape/twitter?maxTweets=50&hoursBack=72 200 in 6216ms
 âœ“ Compiled in 25ms (103 modules)
ğŸ¦ Starting Twitter scrape: maxTweets=50, hoursBack=24
ğŸ’° Estimated cost: $0.0200
ğŸ¦ Starting Twitter scrape for hashtags: #MahsaAmini, #IranProtests, #OpIran
ğŸ“Š Will scrape up to 50 tweets per hashtag
â³ Apify run started: HtAG6EGd2WSFcisYf, waiting for completion...
â³ Apify run status: SUCCEEDED (attempt 1/60)
ğŸ“¦ Received 10 raw tweets from Apify
ğŸ” Sample tweet structure: {
  "noResults": true
}
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âœ… Scraped 0 tweets from Twitter (10 failed transformation)
 GET /api/scrape/twitter?maxTweets=50&hoursBack=24 200 in 6199ms
 âœ“ Compiled in 583ms (229 modules)
 âœ“ Compiled in 306ms (229 modules)
 âœ“ Compiled in 308ms (229 modules)
 âœ“ Compiled in 320ms (229 modules)
   Reload env: .env
 âœ“ Compiled in 283ms (215 modules)
 âœ“ Compiled /api/cron/scrape in 294ms (317 modules)
â° Cron job triggered: Starting automated news scraping
 âœ“ Compiled /api/news in 119ms (172 modules)
ğŸ”„ Manual refresh triggered
ğŸ”„ Fetching from Perplexity, Twitter (Apify), and Telegram...
ğŸ¦ Starting Twitter scrape for hashtags: #MahsaAmini, #IranProtests, #OpIran
ğŸ“Š Will scrape up to 50 tweets per hashtag
â³ Apify run started: ahbacKN4agcMO5BBK, waiting for completion...
â³ Apify run status: SUCCEEDED (attempt 1/60)
ğŸ“¦ Received 10 raw tweets from Apify
ğŸ” Sample tweet structure: {
  "noResults": true
}
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âœ… Scraped 0 tweets from Twitter (10 failed transformation)
ğŸ“° Received 10 articles from Perplexity
ğŸ¦ Received 0 articles from Twitter (Apify)
ğŸ“± Received 4 articles from Telegram
âœ… Added 14 new articles (0 duplicates removed)
ğŸ“Š Total articles in cache: 14
 POST /api/news 200 in 14499ms
âœ… Cron job completed in 14503ms
ğŸ“Š Articles in cache: 14
 GET /api/cron/scrape 200 in 14830ms
âŒ Unauthorized cron request
 GET /api/cron/scrape 401 in 6ms
 âœ“ Compiled in 321ms (229 modules)
 âœ“ Compiled in 274ms (229 modules)
 âœ“ Compiled in 268ms (229 modules)
 âœ“ Compiled in 313ms (229 modules)
   Reload env: .env
 âœ“ Compiled in 278ms (215 modules)
 âœ“ Compiled in 267ms (229 modules)
 âœ“ Compiled in 250ms (229 modules)
 âœ“ Compiled in 305ms (229 modules)
 âœ“ Compiled in 266ms (229 modules)
 âœ“ Compiled in 273ms (229 modules)
 âœ“ Compiled in 549ms (229 modules)
 âœ“ Compiled /api/telegram/test in 335ms (318 modules)
ğŸ“± Starting Telegram scrape...
ğŸ“± No new Telegram updates
 GET /api/telegram/test 200 in 33487ms
 âœ“ Compiled in 284ms (215 modules)
 âœ“ Compiled in 300ms (229 modules)
 âœ“ Compiled in 258ms (229 modules)
 âœ“ Compiled in 241ms (229 modules)
 âœ“ Compiled in 306ms (229 modules)
 âœ“ Compiled in 271ms (229 modules)
 âœ“ Compiled in 285ms (229 modules)
 âœ“ Compiled in 318ms (229 modules)
 âœ“ Compiled in 279ms (229 modules)
 âœ“ Compiled in 288ms (229 modules)
 âœ“ Compiled in 270ms (229 modules)
 âœ“ Compiled in 250ms (229 modules)
 âœ“ Compiled /api/news in 496ms (174 modules)
ğŸ”„ Fetching fresh news from sources...
ğŸ”„ Fetching from Perplexity, Twitter (Apify), and Telegram (Bot API)...
ğŸ¦ Starting Twitter scrape for hashtags: #MahsaAmini, #IranProtests, #OpIran
ğŸ“Š Will scrape up to 50 tweets per hashtag
ğŸ“± Starting Telegram scrape...
â³ Apify run started: T22CkNJwcsCtMX8mT, waiting for completion...
â³ Apify run status: SUCCEEDED (attempt 1/60)
ğŸ“¦ Received 10 raw tweets from Apify
ğŸ” Sample tweet structure: {
  "noResults": true
}
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âš ï¸ Skipping tweet with missing required fields: undefined
âœ… Scraped 0 tweets from Twitter (10 failed transformation)
ğŸ“± No new Telegram updates
ğŸ“° Received 9 articles from Perplexity
ğŸ¦ Received 0 articles from Twitter (Apify)
ğŸ“± Received 0 articles from Telegram (Bot API)
âœ… Found 9 new articles (0 duplicates removed)
ğŸ’¾ Saved 9 articles to Firestore
 GET /api/news 200 in 33580ms
 âœ“ Compiled /api/incidents in 313ms (391 modules)
 GET /api/incidents 200 in 491ms
 âœ“ Compiled in 30ms
 âœ“ Compiled in 392ms (229 modules)
 âœ“ Compiled in 309ms (229 modules)
 âœ“ Compiled in 329ms (229 modules)
 âœ“ Compiled in 281ms (229 modules)
 âœ“ Compiled in 271ms (229 modules)
 âœ“ Compiled in 309ms (229 modules)
 âœ“ Compiled in 344ms (215 modules)
   Reload env: .env
 âœ“ Compiled in 269ms (215 modules)
 âœ“ Compiled in 231ms (215 modules)
   Reload env: .env
 âœ“ Compiled in 436ms (215 modules)
 âœ“ Compiled in 294ms (229 modules)
 âœ“ Compiled in 271ms (229 modules)
 âœ“ Compiled in 292ms (229 modules)
 âœ“ Compiled in 284ms (229 modules)
 âœ“ Compiled in 274ms (229 modules)
 âœ“ Compiled in 550ms (229 modules)
 âœ“ Compiled in 296ms (229 modules)
 âœ“ Compiled in 295ms (229 modules)
 âœ“ Compiled in 270ms (215 modules)
 âœ“ Compiled in 250ms (215 modules)
 âœ“ Compiled in 280ms (215 modules)
 âœ“ Compiled in 262ms (215 modules)
 âœ“ Compiled in 422ms (229 modules)
 âœ“ Compiled in 517ms (215 modules)
 âœ“ Compiled in 287ms (229 modules)
 âœ“ Compiled in 311ms (229 modules)
 âœ“ Compiled in 271ms (215 modules)
 âœ“ Compiled in 443ms (215 modules)
 âœ“ Compiled in 247ms (229 modules)
 âœ“ Compiled in 425ms (215 modules)
 âœ“ Compiled in 241ms (229 modules)
 âœ“ Compiled in 229ms (229 modules)
 âœ“ Compiled in 223ms (229 modules)
 âœ“ Compiled in 240ms (229 modules)
 âœ“ Compiled in 237ms (229 modules)
 âœ“ Compiled in 234ms (229 modules)
 âœ“ Compiled in 186ms (215 modules)
 âœ“ Compiled in 291ms (229 modules)
 âœ“ Compiled in 280ms (229 modules)
 âœ“ Compiled in 265ms (229 modules)
 âœ“ Compiled in 247ms (229 modules)
 âœ“ Compiled in 236ms (229 modules)
 âœ“ Compiled in 223ms (229 modules)
 âœ“ Compiled in 240ms (229 modules)
 âœ“ Compiled in 443ms (229 modules)
 âœ“ Compiled in 247ms (229 modules)
 âœ“ Compiled in 295ms (229 modules)
   Reload env: .env
 âœ“ Compiled in 230ms (215 modules)
 âœ“ Compiled in 239ms (229 modules)
 âœ“ Compiled in 257ms (229 modules)
 âœ“ Compiled in 251ms (229 modules)
 âœ“ Compiled in 229ms (229 modules)
 âœ“ Compiled in 275ms (215 modules)
 âœ“ Compiled in 299ms (229 modules)
 âœ“ Compiled in 272ms (229 modules)
   Reload env: .env
 âœ“ Compiled in 788ms (229 modules)
 âœ“ Compiled in 256ms (229 modules)
 âœ“ Compiled in 260ms (229 modules)
 âœ“ Compiled in 238ms (229 modules)
 âœ“ Compiled in 230ms (215 modules)
 âœ“ Compiled in 238ms (229 modules)
 âœ“ Compiled in 206ms (229 modules)
 âœ“ Compiled in 234ms (229 modules)
 âœ“ Compiled in 246ms (229 modules)
 âœ“ Compiled in 321ms (229 modules)
   Reload env: .env
 âœ“ Compiled in 265ms (215 modules)
 âœ“ Compiled in 277ms (229 modules)
 âœ“ Compiled in 250ms (229 modules)
 âœ“ Compiled in 259ms (229 modules)
 âœ“ Compiled in 295ms (229 modules)
 âš  Found a change in next.config.js. Restarting the server to apply the changes...
   â–² Next.js 15.5.9
   - Local:        http://localhost:3000
   - Network:      http://192.168.68.52:3000
   - Environments: .env

 âœ“ Starting...
 âœ“ (pwa) Compiling for server...
 âœ“ (pwa) Compiling for server...
 âœ“ (pwa) Compiling for client (static)...
 â—‹ (pwa) Service worker: /Users/jesper/Projects/Dev_projects/Rise_up/public/sw.js
 â—‹ (pwa)   URL: /sw.js
 â—‹ (pwa)   Scope: /
 â—‹ (pwa) Building in development mode, caching and precaching are disabled for the most part. This means that offline support is disabled, but you can continue developing other functions in service worker.
 âœ“ Ready in 3.7s
 â—‹ Compiling /api/news ...
 âœ“ Compiled /api/news in 1256ms (610 modules)
[dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  override existing env vars with { override: true }
ğŸ”„ Fetching fresh news from sources...
ğŸ”„ Fetching from Perplexity and Telegram (User API)...
ğŸ“Š Telegram credentials check: SESSION=true, ID=true, HASH=true
[33m[2026-01-12T16:52:16.868] [INFO] - [Running gramJS version 2.25.14][0m
[33m[2026-01-12T16:52:16.873] [INFO] - [Connecting to 149.154.167.91:80/TCPFull...][0m
(node:43735) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
[33m[2026-01-12T16:52:16.893] [INFO] - [Connection to 149.154.167.91:80/TCPFull complete!][0m
[33m[2026-01-12T16:52:16.894] [INFO] - [Using LAYER 184 for initial connect][0m
âœ… Connected to Telegram User API
âœ… Fetched 15 messages from @BBCPersian
âœ… Fetched 29 messages from @IranIntlTV
âœ… Fetched 49 messages from @RadioFarda
âœ… Fetched 53 messages from @ClashReport
âœ… Fetched 61 messages from @noel_reports
âœ… Fetched 64 messages from @irbriefing
âœ… Fetched 65 messages from @Irna_en
âœ… Fetched 71 messages from @vahidonline
[35m[2026-01-12T16:52:18.529] [WARN] - [Disconnecting...][0m
[33m[2026-01-12T16:52:18.529] [INFO] - [Disconnecting from 149.154.167.91:80/TCPFull...][0m
[33m[2026-01-12T16:52:18.529] [INFO] - [connection closed][0m
ğŸ“° Received 7 articles from Perplexity
ğŸ“± Received 71 articles from Telegram (User API)
âœ… Found 78 new articles (0 duplicates removed)
ğŸ’¾ Saved 78 articles to Firestore
ğŸ” Auto-extracting incidents from 71 Telegram articles...
ğŸ—ºï¸ Geocoding 18 unique locations...
 GET /api/news 200 in 21346ms
(node:43735) [DEP0169] DeprecationWarning: `url.parse()` behavior is not standardized and prone to errors that have security implications. Use the WHATWG URL API instead. CVEs are not issued for `url.parse()` vulnerabilities.
ğŸ“¬ Sent push notification to 1 subscriber(s)
âœ… Geocoded 18 locations
Failed to save incident: **Ø§ÛŒÙ† ÙˆÛŒØ¯ÛŒÙˆ Ø§Ø² Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª Ø¢Ø³ØªØ§Ø±Ø§ Ø¨Ù‡ Ø¯Ø³Øª Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ ÙØ§Ø±Ø³ÛŒ Ø±Ø³ÛŒØ¯Ù‡â€ŒØ§Ø³Øª Ùˆ Ú¯ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¬Ù…Ø¹Ù‡ Û±Û¹ Ø¯ÛŒ Ø¨Ø§Ø´Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”ºØ§ÛŒÙ† ÙˆÛŒØ¯ÛŒÙˆ Ø§Ø² Ù…ÛŒØ¯Ø§Ù† Ù‚Ø¯Ø³ ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† Ø¨Ø§Ù‡Ù†Ø± Ø¨Ù‡ Ø¯Ø³Øª Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ ÙØ§Ø±Ø³ÛŒ Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”ºØ§ÛŒÙ† ÙˆÛŒØ¯ÛŒÙˆ Ø§Ø² Ù…ÛŒØ¯Ø§Ù† Ù‚Ø¯Ø³ ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† Ø¨Ø§Ù‡Ù†Ø± Ø¨Ù‡ Ø¯Ø³Øª Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ ÙØ§Ø±Ø³ÛŒ Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”ºØ§ÛŒÙ† ÙˆÛŒØ¯ÛŒÙˆ Ø§Ø² Ù…ÛŒØ¯Ø§Ù† Ù‚Ø¯Ø³ ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† Ø¨Ø§Ù‡Ù†Ø± Ø¨Ù‡ Ø¯Ø³Øª Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ ÙØ§Ø±Ø³ÛŒ Ø±Ø³ÛŒØ¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: â­•ï¸ Ø¢Ù†Ú†Ù‡ Ú©Ù‡ ØªØ§Ú©Ù†ÙˆÙ† Ø§Ø² ØªØ¸Ø§Ù‡Ø±Ø§Øª Ø¶Ø¯ Ø­Ú©ÙˆÙ…ØªÛŒ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØ¯Ø§Ù†ÛŒÙ… â­•ï¸ Ø¢Ù†Ú†Ù‡ Ú©Ù‡ ØªØ§Ú©Ù†ÙˆÙ† Ø§Ø² ØªØ¸Ø§Ù‡Ø±Ø§Øª Ø¶Ø¯ Ø­Ú©ÙˆÙ…ØªÛŒ Ø¯... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: â­•ï¸ Ø¢Ù†Ú†Ù‡ Ú©Ù‡ ØªØ§Ú©Ù†ÙˆÙ† Ø§Ø² ØªØ¸Ø§Ù‡Ø±Ø§Øª Ø¶Ø¯ Ø­Ú©ÙˆÙ…ØªÛŒ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØ¯Ø§Ù†ÛŒÙ… â­•ï¸ Ø¢Ù†Ú†Ù‡ Ú©Ù‡ ØªØ§Ú©Ù†ÙˆÙ† Ø§Ø² ØªØ¸Ø§Ù‡Ø±Ø§Øª Ø¶Ø¯ Ø­Ú©ÙˆÙ…ØªÛŒ Ø¯... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (10): ğŸ”»Ú¯Ø±ÙˆÙ‡ÛŒ Ø§Ø² Ø§ÛŒØ±Ø§Ù†ÛŒØ§Ù† Ú©Ù‡ Ø±ÙˆØ² ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û± Ú˜Ø§Ù†ÙˆÛŒÙ‡ (Û²Û±Ø¯ÛŒ Û±Û´Û°Û´)  Ù…Ù‚Ø§Ø¨Ù„ Ú©Ù†Ø³ÙˆÙ„Ú¯Ø±ÛŒ Ø§ÛŒØ±Ø§Ù† Ø¯Ø± ÙØ±Ø§Ù†Ú©ÙÙˆØ±Øª Ú©Ù‡ Ø¯Ø± ...
Failed to save incident: ğŸ”ºÚ©Ø§Ù†Ø§Ø¯Ø§: Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ú©ÙˆØ¨ Ù‡ÙˆÙ„Ù†Ø§Ú© Ø´Ù‡Ø±ÙˆÙ†Ø¯Ø§Ù†Ø´ Ù¾Ø§ÛŒØ§Ù† Ø¯Ù‡Ø¯ ğŸ”ºÚ©Ø§Ù†Ø§Ø¯Ø§: Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ú©Ùˆ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”»Ú©Ø§Ù†Ø§Ø¯Ø§: Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ú©ÙˆØ¨ Ù‡ÙˆÙ„Ù†Ø§Ú© Ø´Ù‡Ø±ÙˆÙ†Ø¯Ø§Ù†Ø´ Ù¾Ø§ÛŒØ§Ù† Ø¯Ù‡Ø¯ ğŸ”»Ú©Ø§Ù†Ø§Ø¯Ø§: Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ú©Ùˆ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (31): ğŸ”»Ú©Ø§Ù†Ø§Ø¯Ø§: Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ú©ÙˆØ¨ Ù‡ÙˆÙ„Ù†Ø§Ú© Ø´Ù‡Ø±ÙˆÙ†Ø¯Ø§Ù†Ø´ Ù¾Ø§ÛŒØ§Ù† Ø¯Ù‡Ø¯ ğŸ”»Ú©Ø§Ù†Ø§Ø¯Ø§: Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ú©Ùˆ...
Failed to save incident: ğŸ”»ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ ØªØµØ§ÙˆÛŒØ±ÛŒ Ø§Ø² Ø±Ø§Ù‡Ù¾ÛŒÙ…Ø§ÛŒÛŒ Ø­Ø§Ù…ÛŒØ§Ù† Ø­Ú©ÙˆÙ…Øª Ø¯Ø± Ú†Ù†Ø¯ÛŒÙ† Ø´Ù‡Ø± Ø§ÛŒØ±Ø§Ù† Ù¾Ø®Ø´ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”»ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ ØªØµØ§ÙˆÛŒØ±ÛŒ Ø§Ø² Ø±Ø§Ù‡Ù¾ÛŒÙ…Ø§ÛŒÛŒ Ø­Ø§Ù…ÛŒØ§Ù† Ø­Ú©ÙˆÙ…Øª Ø¯Ø± Ú†Ù†Ø¯ÛŒÙ† Ø´Ù‡Ø± Ø§ÛŒØ±Ø§Ù† Ù¾Ø®Ø´ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (31): ğŸ–ŒØ¨Ø®Ø´ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ: ğŸ–ŒØ¨Ø®Ø´ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ:

ğŸ”»Ø±Ø³Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ø±Ø¨Ø³ØªØ§Ù† Ø³Ø¹ÙˆØ¯ÛŒ Ø¨Ø§ ÙˆØ±ÙˆØ¯ Ø§Ø¹ØªØ±Ø§Ø¶â€ŒÙ‡...
âš ï¸ Skipping low-confidence incident (10): ğŸ–ŒØ¨Ø®Ø´ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ: ğŸ–ŒØ¨Ø®Ø´ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ:

ğŸ”»Ø±Ø³Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ø±Ø¨Ø³ØªØ§Ù† Ø³Ø¹ÙˆØ¯ÛŒ Ø¨Ø§ ÙˆØ±ÙˆØ¯ Ø§Ø¹ØªØ±Ø§Ø¶â€ŒÙ‡...
âš ï¸ Skipping low-confidence incident (10): ğŸ–ŒØ¨Ø®Ø´ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ: ğŸ–ŒØ¨Ø®Ø´ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ:

ğŸ”»Ø±Ø³Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ø±Ø¨Ø³ØªØ§Ù† Ø³Ø¹ÙˆØ¯ÛŒ Ø¨Ø§ ÙˆØ±ÙˆØ¯ Ø§Ø¹ØªØ±Ø§Ø¶â€ŒÙ‡...
âš ï¸ Skipping low-confidence incident (31): Ø¯Ø¨ÛŒØ±Ú©Ù„ Ø³Ø§Ø²Ù…Ø§Ù† Ù…Ù„Ù„ Ù…ØªØ­Ø¯ Ø¯Ø± Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø§ÛŒÚ©Ø³ Ù†ÙˆØ´Øª Ø§Ø² Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø®Ø´ÙˆÙ†Øª Ø¨ÛŒâ€ŒØ­Ø¯ Ù…Ù‚Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¹Ù„ÛŒÙ‡ Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø´ÙˆÚ©Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
âš ï¸ Skipping low-confidence incident (10): Ø¯Ø¨ÛŒØ±Ú©Ù„ Ø³Ø§Ø²Ù…Ø§Ù† Ù…Ù„Ù„ Ù…ØªØ­Ø¯ Ø¯Ø± Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø§ÛŒÚ©Ø³ Ù†ÙˆØ´Øª Ø§Ø² Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø®Ø´ÙˆÙ†Øª Ø¨ÛŒâ€ŒØ­Ø¯ Ù…Ù‚Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¹Ù„ÛŒÙ‡ Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø´ÙˆÚ©Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
Failed to save incident: Ø¯Ø± Ù¾Ø§Ø³Ø® Ø¨Ù‡ ÙØ±Ø§Ø®ÙˆØ§Ù† Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡ Ø±Ø¶Ø§ Ù¾Ù‡Ù„ÙˆÛŒØŒ ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒØŒ Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø¯Ø± Ø¯Ù‡â€ŒÙ‡Ø§ Ø´Ù‡Ø± Ùˆ Ø¨ÛŒØ´ Ø§Ø² Û²Û° Ø§Ø³ØªØ§Ù† Ø§ÛŒØ±Ø§Ù† Ø¨Ù‡ Ø®ÛŒØ§Ø¨Ø§Ù†â€ŒÙ‡Ø§ Ø¢Ù…Ø¯Ù†Ø¯ Ùˆ ØªØ¬Ù…Ø¹ Ø§Ø¹ØªØ±Ø§Ø¶ÛŒ Ø¨Ø±Ú¯Ø²Ø§Ø± Ú©Ø±Ø¯Ù†Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆÛŒØ¯ÛŒÙˆÛŒ Ø±Ø³ÛŒØ¯Ù‡ Ø¨Ù‡ Ø§ÛŒØ±Ø§Ù†â€ŒØ§ÛŒÙ†ØªØ±Ù†Ø´Ù†Ø§Ù„ØŒ Ú¯Ø±ÙˆÙ‡ÛŒ Ø§Ø² Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø¯Ø± Ú©Ø±Ø¬ Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒ Ø¯Ø± ØªØ¬Ù…Ø¹ Ø§Ø¹ØªØ±Ø§Ø¶ÛŒ Ø®ÙˆØ¯ Ø´Ø¹Ø§Ø± Â«ØªØ§ Ø¢Ø®Ø± Ù‡ÙØªÙ‡ØŒ Ø³ÛŒØ¯Ø¹Ù„ÛŒ Ø±ÙØªÙ‡Â» Ø³Ø±Ø¯Ø§Ø¯Ù†Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ÙˆÛŒØ¯ÛŒÙˆÛŒ Ø±Ø³ÛŒØ¯Ù‡ Ø¨Ù‡ Ø§ÛŒØ±Ø§Ù†â€ŒØ§ÛŒÙ†ØªØ±Ù†Ø´Ù†Ø§Ù„ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú¯Ø±ÙˆÙ‡ÛŒ Ø§Ø² Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø¯Ø± Ø³Ø¹Ø§Ø¯Øªâ€ŒØ¢Ø¨Ø§Ø¯ ØªÙ‡Ø±Ø§Ù†ØŒ Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©Ø´Ù†Ø¨Ù‡ ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ ØªØ§Ø²Ù‡ Ø±Ø³ÛŒØ¯Ù‡ Ø¨Ù‡ Ø§ÛŒØ±Ø§Ù†â€ŒØ§ÛŒÙ†ØªØ±Ù†Ø´Ù†Ø§Ù„ Ø§Ø² Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡ Û±Û¸ Ø¯ÛŒØŒ Ù…Ø±Ø¯Ù… Ù…Ø¹ØªØ±Ø¶ ØªÙ‡Ø±Ø§Ù† Ø±Ø§ Ø¯Ø± Ø®ÛŒØ§Ø¨Ø§Ù†â€Œ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **Ù¾Ø§Ø±Ù„Ù…Ø§Ù† Ø§Ø±ÙˆÙ¾Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯ÛŒÙ¾Ù„Ù…Ø§Øªâ€ŒÙ‡Ø§ Ùˆ Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ø¨Ù‡ Ø¯ÙØ§ØªØ± Ø§ÛŒÙ† Ù†Ù‡Ø§Ø¯ Ø±Ø§ Ù‚Ø·Ø¹ Ú©Ø±Ø¯** **Ù¾Ø§Ø±Ù„... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **Ù¾Ø§Ø±Ù„Ù…Ø§Ù† Ø§Ø±ÙˆÙ¾Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯ÛŒÙ¾Ù„Ù…Ø§Øªâ€ŒÙ‡Ø§ Ùˆ Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ø¨Ù‡ Ø¯ÙØ§ØªØ± Ø§ÛŒÙ† Ù†Ù‡Ø§Ø¯ Ø±Ø§ Ù‚Ø·Ø¹ Ú©Ø±Ø¯** **Ù¾Ø§Ø±Ù„... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ØªØµØ§ÙˆÛŒØ± Ø§Ø±Ø³Ø§Ù„ÛŒ Ø¨Ù‡ Ø±Ø§Ø¯ÛŒÙˆÙØ±Ø¯Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯ Ú©Ù‡ Ø´Ø§Ù…Ú¯Ø§Ù‡ Û²Û± Ø¯ÛŒØŒ Ø¬Ù…Ø¹ÛŒ Ø§Ø² Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø¯Ø± Ù…Ù†Ø·Ù‚Ù‡ Ù¾ÙˆÙ†Ú© ØªÙ‡Ø±Ø§Ù† ØªØ¬Ù…Ø¹ Ú©Ø±Ø¯Ù†Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ØªØµØ§ÙˆÛŒØ± Ø§Ø±Ø³Ø§Ù„ÛŒ Ø¨Ù‡ Ø±Ø§Ø¯ÛŒÙˆÙØ±Ø¯Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯ Ú©Ù‡ Ø´Ø§Ù…Ú¯Ø§Ù‡ Û²Û± Ø¯ÛŒØŒ Ø¬Ù…Ø¹ÛŒ Ø§Ø² Ù…Ø¹ØªØ±Ø¶Ø§Ù† Ø¯Ø± Ù…Ù†Ø·Ù‚Ù‡ Ù¾ÙˆÙ†Ú© ØªÙ‡Ø±Ø§Ù† ØªØ¬Ù…Ø¹ Ú©Ø±Ø¯Ù†Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **ØªÙ…Ø§Ù…ÛŒ Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ Â«Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø¯Ø§Ù…Û€ Ø§Ø¹ØªØ±Ø§Ø¶Ø§ØªÂ» ØªØ¹Ø·ÛŒÙ„ Ø´Ø¯Ù†Ø¯** **ØªÙ…Ø§Ù…ÛŒ Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (10): ğŸ”¸ØºÙ„Ø§Ù…Ø­Ø³ÛŒÙ† Ø§Ú˜Ù‡â€ŒØ§ÛŒØŒ Ø±Ø¦ÛŒØ³ Ù‚ÙˆÙ‡ Ù‚Ø¶Ø§Ø¦ÛŒÙ‡ Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ø¨Ø§ Ø§Ø´Ø§Ø±Ù‡ Ø¨Ù‡ Ù…Ø£Ù…ÙˆØ±Ø§Ù† Ø³Ø±Ú©ÙˆØ¨Ù Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª Ú©Ù‡ Ø¯Ø± Ø¯Ø±Ú¯ÛŒØ±ÛŒ...
Failed to save incident: ğŸ”¸Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø´Ù‡Ø± Ø§Ù‡ÙˆØ§Ø² Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒ ØµØ­Ù†Ù‡ ØªØ¬Ù…Ø¹ Ø´Ù‡Ø±ÙˆÙ†Ø¯Ø§Ù† Ù…Ø¹ØªØ±Ø¶ Ø¨ÙˆØ¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø´Ù‡Ø± Ø§Ù‡ÙˆØ§Ø² Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒ ØµØ­Ù†Ù‡ ØªØ¬Ù…Ø¹ Ø´Ù‡Ø±ÙˆÙ†Ø¯Ø§Ù† Ù…Ø¹ØªØ±Ø¶ Ø¨ÙˆØ¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø´Ù‡Ø± Ø§Ù‡ÙˆØ§Ø² Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒ ØµØ­Ù†Ù‡ ØªØ¬Ù…Ø¹ Ø´Ù‡Ø±ÙˆÙ†Ø¯Ø§Ù† Ù…Ø¹ØªØ±Ø¶ Ø¨ÙˆØ¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ÛŒ Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ø±ÙˆØ² Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û² Ø¯ÛŒ Ø¨Ù‡ Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡ Ùˆ Ú¯Ø³ØªØ±Ø¯Ù‡ Ø±Ø§Ù‡Ù¾ÛŒÙ…Ø§ÛŒÛŒ Ø¯Ø± Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ú©Ù‡ Ø¨Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù† Ù†Ù‡Ø§Ø¯Ù‡Ø§ÛŒ Ø­Ú©ÙˆÙ…ØªÛŒ ØµÙˆØ±Øª Ú¯Ø±ÙØªÙ‡ Ø§Ù‚Ø¯Ø§Ù… Ú©Ø±Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ÛŒ Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ø±ÙˆØ² Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û² Ø¯ÛŒ Ø¨Ù‡ Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡ Ùˆ Ú¯Ø³ØªØ±Ø¯Ù‡ Ø±Ø§Ù‡Ù¾ÛŒÙ…Ø§ÛŒÛŒ Ø¯Ø± Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ú©Ù‡ Ø¨Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù† Ù†Ù‡Ø§Ø¯Ù‡Ø§ÛŒ Ø­Ú©ÙˆÙ…ØªÛŒ ØµÙˆØ±Øª Ú¯Ø±ÙØªÙ‡ Ø§Ù‚Ø¯Ø§Ù… Ú©Ø±Ø¯ Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ Ø¬Ø¹ÙØ± Ù¾Ù†Ø§Ù‡ÛŒØŒ Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù† Ø³Ø±Ø´Ù†Ø§Ø³ Ø§ÛŒØ±Ø§Ù†ÛŒØŒ Ú©Ù‡ ØªÙˆØ§Ù†Ø³Øª Ø¬Ø§ÛŒØ²Ù‡ Â«Ø¨Ù‡ØªØ±ÛŒÙ† Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒÂ» Ø§Ù†Ø¬Ù…Ù† Ù…Ù†ØªÙ‚Ø¯Ø§Ù† ÙÛŒÙ„Ù… Ù†ÛŒÙˆÛŒ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ Ø¬Ø¹ÙØ± Ù¾Ù†Ø§Ù‡ÛŒØŒ Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù† Ø³Ø±Ø´Ù†Ø§Ø³ Ø§ÛŒØ±Ø§Ù†ÛŒØŒ Ú©Ù‡ ØªÙˆØ§Ù†Ø³Øª Ø¬Ø§ÛŒØ²Ù‡ Â«Ø¨Ù‡ØªØ±ÛŒÙ† Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒÂ» Ø§Ù†Ø¬Ù…Ù† Ù…Ù†ØªÙ‚Ø¯Ø§Ù† ÙÛŒÙ„Ù… Ù†ÛŒÙˆÛŒ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ÙˆØ²ÛŒØ± Ø§Ù…ÙˆØ± Ø®Ø§Ø±Ø¬Ù‡ Ø§ÛŒØ±Ø§Ù†ØŒ Ø±ÙˆØ² Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û² Ø¯ÛŒ Ú¯ÙØª Ú©Ù‡ Ø§ÛŒØ±Ø§Ù† Ù‡Ù… Ø¨Ø±Ø§ÛŒ Â«Ø¬Ù†Ú¯Â» Ùˆ Ù‡Ù… Ø¨Ø±Ø§ÛŒ Â«Ù…Ø°Ø§Ú©Ø±Ù‡Â» Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (10): ğŸ”¸ØªØ¬Ù…Ø¹ Ø§Ø¹ØªØ±Ø§Ø¶ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒØ§Ù† Ù…Ù‚ÛŒÙ… Ù„Ø³â€ŒØ¢Ù†Ø¬Ù„Ø³ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ø¬Ù†ÙˆØ¨ Ú©Ø§Ù„ÛŒÙØ±Ù†ÛŒØ§ Ø¯Ø± Ø­Ù…Ø§ÛŒØª Ø§Ø² Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª Ø¯Ø§Ø®Ù„ Ø§ÛŒØ±Ø§Ù† Ø¨Ø§ Ø±Ø§Ù†Ø¯Ù‡ Ø´Ø¯Ù† ÛŒÚ© Ø®ÙˆØ¯Ø±Ùˆ Ø¨Ù‡ Ø¯Ø§Ø®Ù„ Ø¬Ù…Ø¹ÛŒØª Ø¨Ù‡ Ù†Ø§Ø¢Ø±Ø§Ù…ÛŒ Ú©Ø´ÛŒØ¯
Failed to save incident: ğŸ”¸ØªØµØ§ÙˆÛŒØ± Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø¯Ø± Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ú©Ù‡ Ú¯ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Û²Û± Ø¯ÛŒ Ù…Ø§Ù‡ Ø§Ø³ØªØŒ ØªØ´ÛŒÛŒØ¹ Ù¾ÛŒÚ©Ø± Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ú¯... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸ØªØµØ§ÙˆÛŒØ± Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø¯Ø± Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ú©Ù‡ Ú¯ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Û²Û± Ø¯ÛŒ Ù…Ø§Ù‡ Ø§Ø³ØªØŒ ØªØ´ÛŒÛŒØ¹ Ù¾ÛŒÚ©Ø± Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ú¯... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ Ø§Ø² Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ù† Â«Ø±Ø¦ÛŒØ³ Ù¾Ù„ÛŒØ³ Ù…Ø¨Ø§Ø±Ø²Ù‡ Ø¨Ø§ Ù…ÙˆØ§Ø¯ Ù…Ø®Ø¯Ø± Ù…Ø´Ù‡Ø¯Â» Ø®Ø¨Ø± Ø¯Ø§Ø¯** **ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ Ø§Ø² Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ù† ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ Ø§Ø² Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ù† Â«Ø±Ø¦ÛŒØ³ Ù¾Ù„ÛŒØ³ Ù…Ø¨Ø§Ø±Ø²Ù‡ Ø¨Ø§ Ù…ÙˆØ§Ø¯ Ù…Ø®Ø¯Ø± Ù…Ø´Ù‡Ø¯Â» Ø®Ø¨Ø± Ø¯Ø§Ø¯** **ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ Ø§Ø² Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ù† ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ Ø§Ø² Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ù† Â«Ø±Ø¦ÛŒØ³ Ù¾Ù„ÛŒØ³ Ù…Ø¨Ø§Ø±Ø²Ù‡ Ø¨Ø§ Ù…ÙˆØ§Ø¯ Ù…Ø®Ø¯Ø± Ù…Ø´Ù‡Ø¯Â» Ø®Ø¨Ø± Ø¯Ø§Ø¯** **ğŸ”¸ØµØ¯Ø§ÙˆØ³ÛŒÙ…Ø§ Ø§Ø² Ú©Ø´ØªÙ‡â€ŒØ´Ø¯Ù† ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (31): **ğŸ”¸Ø³ÛŒâ€ŒØ¨ÛŒâ€ŒØ§Ø³ Ù†ÛŒÙˆØ²: ØªØ±Ø§Ù…Ù¾ Ø¯Ø± Ø¬Ø±ÛŒØ§Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ù†Ø¸Ø§Ù…ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ø§ÛŒØ±Ø§Ù† Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡ Ø§Ø³Øª** **ğŸ”¸Ø³ÛŒâ€ŒØ¨ÛŒâ€ŒØ§...
âš ï¸ Skipping low-confidence incident (31): **ÙˆØ§Ù„â€ŒØ§Ø³ØªØ±ÛŒØª Ø¬ÙˆØ±Ù†Ø§Ù„: ØªØ±Ø§Ù…Ù¾ Ø¨Ø§ Ø§Ø¹Ø¶Ø§ÛŒ Ø§Ø±Ø´Ø¯ Ú©Ø§Ø¨ÛŒÙ†Ù‡â€ŒØ§Ø´ Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª Ø§ÛŒØ±Ø§Ù† Ø¬Ù„Ø³Ù‡ Ø¨Ø±Ú¯Ø²Ø§Ø± Ù…ÛŒâ€ŒÚ©...
Failed to save incident: ğŸ”¸Ù…Ø§Ø±ÛŒØ§ Ú©ÙˆØ±ÛŒÙ†Ø§ Ù…Ø§Ú†Ø§Ø¯ÙˆØŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø¬Ø§ÛŒØ²Ù‡ ØµÙ„Ø­ Ù†ÙˆØ¨Ù„ Ùˆâ€Œ Ú†Ù‡Ø±Ù‡Ù” Ø§ØµÙ„ÛŒ Ø§Ù¾ÙˆØ²ÛŒØ³ÛŒÙˆÙ† ÙˆÙ†Ø²ÙˆØ¦Ù„Ø§ØŒ Ø¨Ø§ Ø§Ù†ØªØ´Ø§Ø± Ù¾ÛŒØ§Ù…ÛŒ Ø§Ø² Ù…... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: ğŸ”¸Ù…Ø§Ø±ÛŒØ§ Ú©ÙˆØ±ÛŒÙ†Ø§ Ù…Ø§Ú†Ø§Ø¯ÙˆØŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø¬Ø§ÛŒØ²Ù‡ ØµÙ„Ø­ Ù†ÙˆØ¨Ù„ Ùˆâ€Œ Ú†Ù‡Ø±Ù‡Ù” Ø§ØµÙ„ÛŒ Ø§Ù¾ÙˆØ²ÛŒØ³ÛŒÙˆÙ† ÙˆÙ†Ø²ÙˆØ¦Ù„Ø§ØŒ Ø¨Ø§ Ø§Ù†ØªØ´Ø§Ø± Ù¾ÛŒØ§Ù…ÛŒ Ø§Ø² Ù…... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **Ù¾Ø§Ù¾ Ù„Ø¦ÙˆØŒ Ø±Ù‡Ø¨Ø± Ú©Ø§ØªÙˆÙ„ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†: Ø°Ù‡Ù†Ù… Ø¯Ø±Ú¯ÛŒØ± Ø§ÙˆØ¶Ø§Ø¹ Ú©Ù†ÙˆÙ†ÛŒ Ø®Ø§ÙˆØ±Ù…ÛŒØ§Ù†Ù‡ØŒ Ø§Ø² Ø¬Ù…Ù„Ù‡ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ø§Ø³Øª** **Ù¾Ø§Ù¾ ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: **Ù¾Ø§Ù¾ Ù„Ø¦ÙˆØŒ Ø±Ù‡Ø¨Ø± Ú©Ø§ØªÙˆÙ„ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†: Ø°Ù‡Ù†Ù… Ø¯Ø±Ú¯ÛŒØ± Ø§ÙˆØ¶Ø§Ø¹ Ú©Ù†ÙˆÙ†ÛŒ Ø®Ø§ÙˆØ±Ù…ÛŒØ§Ù†Ù‡ØŒ Ø§Ø² Ø¬Ù…Ù„Ù‡ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ø§Ø³Øª** **Ù¾Ø§Ù¾ ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: Thousands rallied in Tehran and other cities after calls from officials to show support for the government Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: Footage from Gorgan, Golestan, Iran reportedly very recent Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: Footage from Gorgan, Golestan, Iran reportedly very recent Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: Tehran, today: Protesters chant â€œThis is the final battle, Pahlavi will return Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒØ§Ù† Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ ØªØ¬Ù…Ø¹ Ø¹Ù„ÛŒÙ‡ Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ùˆ Ø³Ø± Ø¯Ø§Ø¯Ù† Ø´Ø¹Ø§Ø±Ù‡Ø§ÛŒÛŒ Ø¯Ø± Ø­Ù…Ø§ÛŒØª Ø§Ø² Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (10): Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒØ§Ù† Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ ØªØ¬Ù…Ø¹ Ø¹Ù„ÛŒÙ‡ Ø¬Ù…Ù‡ÙˆØ±ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ Ùˆ Ø³Ø± Ø¯Ø§Ø¯Ù† Ø´Ø¹Ø§Ø±Ù‡Ø§ÛŒÛŒ Ø¯Ø± Ø­Ù…Ø§ÛŒØª Ø§Ø² Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡...
âš ï¸ Skipping low-confidence incident (10): â€Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡ Ø±Ø¶Ø§ Ù¾Ù‡Ù„ÙˆÛŒ Ø¯Ø± Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø®ÙˆØ¯ Ø¨Ø§ Ø§Ø´Ø§Ø±Ù‡ Ø¨Ù‡ ØªØ¸Ø§Ù‡Ø±Ø§Øª Ù…ÛŒÙ„ÛŒÙˆÙ†ÛŒ Ø¯Ùˆ Ù‡ÙØªÙ‡ Ø§Ø®ÛŒØ±ØŒ Ø¢ØºØ§Ø² Ù…Ø±Ø­Ù„Ù‡ Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø²...
Failed to save incident: ÛŒÚ©Ø´Ù†Ø¨Ù‡ Ø¨ÛŒØ³Øªâ€ŒÙˆâ€ŒÛŒÚ©Ù… Ø¯ÛŒâ€ŒÙ…Ø§Ù‡ØŒ Ø¢ØºØ§Ø² Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª Ù…Ø±Ø¯Ù…ÛŒ Ø¯Ø± Ø¨Ù†Ø¯Ø±Ø¹Ø¨Ø§Ø³ Ø¨Ø§ Ø´Ø¹Ø§Ø± Ø§ÛŒÙ† Ø¢Ø®Ø±ÛŒÙ† Ù†Ø¨Ø±Ø¯Ù‡ Ù¾Ù‡Ù„ÙˆÛŒ Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ù‡ ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (10): ğŸ–¥ **Iran ambassador condemns Western double standards in dealing with protests** ğŸ–¥ **Iran ambas...
Failed to save incident: â€ŒğŸ”¸Ø®Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ ÙØ§Ø±Ø³ Ø¯Ø± Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…ÛŒ Ø®ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø§Ø¯Ù‡ Ú©Ù‡ Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒ ØªØ¬Ù…Ø¹Ø§Øª Ø§Ø¹ØªØ±Ø§Ø¶ÛŒ Ø¹Ù„ÛŒÙ‡ Ø­Ú©ÙˆÙ…Øª Ø¯Ø± Ù…Ø­Ù„Ù‡â€ŒÙ‡Ø§ÛŒ Ù†ÙˆØ§Ø¨ Ùˆ Ø³Ø¹Ø§Ø¯Øªâ€ŒØ¢Ø¨Ø§Ø¯ ØªÙ‡Ø±Ø§Ù† Ø¨Ø±Ú¯Ø²Ø§Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: â€ŒğŸ”¸Ø®Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ ÙØ§Ø±Ø³ Ø¯Ø± Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…ÛŒ Ø®ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø§Ø¯Ù‡ Ú©Ù‡ Ø´Ø§Ù…Ú¯Ø§Ù‡ ÛŒÚ©â€ŒØ´Ù†Ø¨Ù‡ Û²Û± Ø¯ÛŒ ØªØ¬Ù…Ø¹Ø§Øª Ø§Ø¹ØªØ±Ø§Ø¶ÛŒ Ø¹Ù„ÛŒÙ‡ Ø­Ú©ÙˆÙ…Øª Ø¯Ø± Ù…Ø­Ù„Ù‡â€ŒÙ‡Ø§ÛŒ Ù†ÙˆØ§Ø¨ Ùˆ Ø³Ø¹Ø§Ø¯Øªâ€ŒØ¢Ø¨Ø§Ø¯ ØªÙ‡Ø±Ø§Ù† Ø¨Ø±Ú¯Ø²Ø§Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (31): Ø¯ÙˆÙ†Ø§Ù„Ø¯ ØªØ±Ø§Ù…Ù¾ØŒ Ø±ÛŒÛŒØ³â€ŒØ¬Ù…Ù‡ÙˆØ±ÛŒ Ø§ÛŒØ§Ù„Ø§Øª Ù…ØªØ­Ø¯Ù‡ØŒ Ø¨Ø§Ù…Ø¯Ø§Ø¯ Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û² Ø¯ÛŒ Ø¨Ù‡ ÙˆÙ‚Øª Ø§ÛŒØ±Ø§Ù†ØŒ Ø¯Ø± Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ Ø¨Ø§ Ø®Ø¨Ø±Ù†Ú¯Ø§Ø±Ø§Ù†...
âš ï¸ Skipping low-confidence incident (10): Ø¯ÙˆÙ†Ø§Ù„Ø¯ ØªØ±Ø§Ù…Ù¾ØŒ Ø±ÛŒÛŒØ³â€ŒØ¬Ù…Ù‡ÙˆØ±ÛŒ Ø§ÛŒØ§Ù„Ø§Øª Ù…ØªØ­Ø¯Ù‡ØŒ Ø¨Ø§Ù…Ø¯Ø§Ø¯ Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û² Ø¯ÛŒ Ø¨Ù‡ ÙˆÙ‚Øª Ø§ÛŒØ±Ø§Ù†ØŒ Ø¯Ø± Ú¯ÙØªâ€ŒÙˆÚ¯Ùˆ Ø¨Ø§ Ø®Ø¨Ø±Ù†Ú¯Ø§Ø±Ø§Ù†...
Failed to save incident: Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡ Ø±Ø¶Ø§ Ù¾Ù‡Ù„ÙˆÛŒØŒ Ø¯Ø± Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ø®ÙˆØ¯ Ú©Ù‡ Ø¹ØµØ± ÛŒÚ©Ø´Ù†Ø¨Ù‡ Ù…Ù†ØªØ´Ø± Ø´Ø¯ØŒ Ú¯ÙØªÙ‡ Ø§Ø³Øª Ø§Ø² Ù†Ø¸Ø± Ø§Ùˆ Ø­Ú©ÙˆÙ…Øª Ø¯Ø± Ø§ÛŒ... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
âš ï¸ Skipping low-confidence incident (10): Ø´Ø¨Ú©Ù‡ Ø¢Ù…Ø±ÛŒÚ©Ø§ÛŒÛŒ Ø§Ù†â€ŒØ¨ÛŒâ€ŒØ³ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø§Ø¯Ù‡ Ø§Ø³Øª Ú©Ù‡ Ø¯Ø± Ø§ÛŒÙ† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ù‡ Ø¯Ø± Ù…Ø­Ù„Ù‡ Â«ÙˆØ³Øªâ€ŒÙˆÙˆØ¯Â» Ø±Ø® Ø¯Ø§Ø¯ Ø¯Ø³Øªâ€ŒÚ©Ù… Ø¯Ùˆ Ù†ÙØ± Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ† Ø­Ø§Ø¯Ø«Ù‡ Ù…Ø¹Ø§ÛŒÙ†Ù‡ Ø´Ø¯Ù†Ø¯
Failed to save incident: â™¦ï¸Ø¯Ùˆ Ù…Ù‚Ø§Ù… Ø±Ø³Ù…ÛŒ Ø¢Ù…Ø±ÛŒÚ©Ø§ Ø¨Ù‡ Â«Ø³ÛŒâ€ŒØ§Ù†â€ŒØ§Ù†Â» Ú¯ÙØªÙ†Ø¯ Ú©Ù‡ Ø¯ÙˆÙ†Ø§Ù„Ø¯ ØªØ±Ø§Ù…Ù¾ØŒ Ø±Ø¦ÛŒØ³â€ŒØ¬Ù…Ù‡ÙˆØ±ÛŒ Ø§ÛŒØ§Ù„Ø§Øª Ù…ØªØ­Ø¯Ù‡ØŒ Ø¯Ø± Ù¾ÛŒ Ø§Ø¹ØªØ±Ø§Ø¶... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
Failed to save incident: â™¦ï¸Ø¯Ùˆ Ù…Ù‚Ø§Ù… Ø±Ø³Ù…ÛŒ Ø¢Ù…Ø±ÛŒÚ©Ø§ Ø¨Ù‡ Â«Ø³ÛŒâ€ŒØ§Ù†â€ŒØ§Ù†Â» Ú¯ÙØªÙ†Ø¯ Ú©Ù‡ Ø¯ÙˆÙ†Ø§Ù„Ø¯ ØªØ±Ø§Ù…Ù¾ØŒ Ø±Ø¦ÛŒØ³â€ŒØ¬Ù…Ù‡ÙˆØ±ÛŒ Ø§ÛŒØ§Ù„Ø§Øª Ù…ØªØ­Ø¯Ù‡ØŒ Ø¯Ø± Ù¾ÛŒ Ø§Ø¹ØªØ±Ø§Ø¶... Error: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "relatedArticles.`0`.url"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.
    at saveIncident (lib/firestore.ts:277:51)
    at extractIncidentsFromArticles (app/api/news/route.ts:321:15)
  275 |   if (!db) throw new Error('Firestore not initialized');
  276 |
> 277 |   const docRef = await db.collection('incidents').add({
      |                                                   ^
  278 |     ...incident,
  279 |     createdAt: admin.firestore.FieldValue.serverTimestamp(),
  280 |   });
ğŸ’¾ Saved 0/64 auto-extracted incidents
[Error: TIMEOUT]
[Error: TIMEOUT]
[Error: TIMEOUT]
[Error: TIMEOUT]
[Error: TIMEOUT]
[Error: TIMEOUT]
 âœ“ Compiled in 14ms
[Error: TIMEOUT]
[?25h
